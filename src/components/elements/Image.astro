---
import type { ImageMetadata } from 'astro'
import { Picture } from 'astro:assets'

type Props = {
  src: string | ImageMetadata
  alt: string
}

const { alt, src } = Astro.props
---

<figure>
  {
    typeof src === 'string' ? (
      <img {alt} {src} />
    ) : (
      <Picture
        aria-label={alt}
        formats={['avif', 'webp']}
        fallbackFormat="jpg"
        {alt}
        {src}
        widths={[640, 768, 1024]}
      />
    )
  }
  <figcaption>{alt}</figcaption>
</figure>
<style>
  figure {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    place-items: center;
    margin: 1.5rem 0;
  }
</style>
