---
import type { OEmbedSchema } from './types'
import { OEmbedPhoto } from './OEmbedPhoto'
import { OEmbedVideo } from './OEmbedVideo'
import { OEmbedRich } from './OEmbedRich'
import LinkCard from '../Link/LinkCard.astro'
import { isPhoto, isVideo, isRich } from './embed-is'

export type Props = {
  oEmbed: OEmbedSchema
  href: string
}

const props = Astro.props
let oEmbedData = props.oEmbed
const href = props.href
oEmbedData = JSON.parse(oEmbedData as unknown as string)
---

{
  isPhoto(oEmbedData) ? (
    <OEmbedPhoto client:only="solid" data={oEmbedData} />
  ) : isVideo(oEmbedData) ? (
    <OEmbedVideo client:only="solid" data={oEmbedData} />
  ) : isRich(oEmbedData) ? (
    <OEmbedRich client:only="solid" data={oEmbedData} />
  ) : (
    <LinkCard {href} data-link-card />
  )
}
