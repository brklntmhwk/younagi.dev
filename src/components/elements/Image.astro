---
import type { ImageMetadata } from 'astro'
import { Picture } from 'astro:assets'

type Props = {
  src: string | ImageMetadata
  alt: string
}

const { alt, src } = Astro.props
---

<figure>
  <div class="image-wrapper">
    {
      typeof src === 'string' ? (
        <img {alt} {src} />
      ) : (
        <Picture
          formats={['avif', 'webp']}
          fallbackFormat="jpg"
          {alt}
          {src}
          widths={[640, 768, 1024]}
        />
      )
    }
  </div>
  <figcaption>{alt}</figcaption>
</figure>
